<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="co.huby.prj.board.mapper.EmploymentMap">

	<select id="getMatchedEmploymentList"
		parameterType="EmploymentsVo" resultType="map">
		<!-- SELECT c.company_name as "company_name", e.employment_title as "employment_title", 
			e.employment_contents as "employment_contents" FROM company c, employments 
			e WHERE c.company_id = e.company_id -->
		SELECT DISTINCT c.company_name as "company_name", 
		e.employment_title as "employment_title",
		e.employment_contents as "employment_contents",
		c.company_id as "company_id", e.hope_job, e.employment_id as "employment_id"
		FROM company c
		Join employments e
		ON c.company_id = e.company_id
		Join resume r
		ON e.hope_job = r.hope_job
		WHERE r.member_id = #{member_id, jdbcType=VARCHAR}
	</select>
	
	<select id="SelectMatchedEmploymentList" resultType="map" parameterType="map">
	select e.EMPLOYMENT_ID,e.EMPLOYMENT_TITLE,e.EMPLOYMENT_CONTENTS,e.HOPE_CAREER,e.HOPE_GRADUATE, e.employment_id,
			e.HOPE_JOB_POSITION,e.HOPE_JOB,e.HOPE_LOCATION,e.HOPE_WORK_TYPE,e.EMPLOYMENT_PREFER,e.EMPLOYMENT_TIME,
			c.COMPANY_NAME,c.COMPANY_TEL,c.COMPANY_EMAIL,c.CEO_NAME,c.BUSINESS_TYPE,
			c.COMPANY_ADDR,c.BUSINESS_CATEGORY,c.COMPANY_BIRTH,c.COMPANY_SALES,
			c.HOMEPAGE,c.COMPANY_DATE, c.company_id
	from employments e, company c
	where e.company_id = c.company_id and e.employment_id = #{employment_id}
	</select>
	
	<select id="ApplyUserInfoAll" resultType="map" parameterType="map">
	select m.member_id, m.member_name, m.member_birth, m.member_addr, m.member_tel, m.member_email, m.member_gender, m.member_photo,
			r.resume_id, r.member_id, r.resume_title, r.hope_job, r.hope_salary, r.hope_location, r.final_education, r.select_resume, r.select_public, r.resume_coment,
			v.video_id, v.video_contents, v.video_img, v.hashtag, v.company_id, v.member_id,
			s.skill_id, s.award_name, s.sicense_name, s.skill_name, s.award_agency, s.skill_level, s.acquisition, s.award_contents, s.award_date, s.member_id
	from member m, resume r, video v, skills s
	where m.member_id = r.member_id 
			and m.member_id = v.member_id
			and m.member_id = s.member_id
			and m.member_id= #{member_id}
	</select>
</mapper>
