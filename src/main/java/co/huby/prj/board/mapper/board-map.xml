<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="co.huby.prj.board.mapper.BoardMap">
	<!-- 기업에게 매치해서 추천해주는거 -->
	<select id="getMatchedListForCompany" parameterType="co.huby.prj.vo.VideoVo" resultType="map">
		SELECT DISTINCT c.code_name as "code_name", 
			v.video_id as "video_id", 
			v.video_contents as "video_contents", 
			v.video_img as "video_img", 
			v.member_id as "member_id"
		FROM code c
    	Join video v 
    	ON c.code_id = v.hashtag
        	Join employments e
        	ON e.hope_job = v.hashtag
        	WHERE e.company_id =#{company_id}
        	AND v.video_id NOT IN (
        						SELECT video_id 
        						FROM like_video 
        						WHERE company_id =#{company_id})
	</select>
	
	<!-- 기업이 영상에 좋아요 버튼을 클릭할경우 테이블에 저장되는거. -->
	<insert id="videoLikeInsertFromCompany" parameterType="co.huby.prj.vo.VideoVo">
	INSERT INTO like_video
	VALUES (LIKE_VIDEO_SEQ.nextval, #{video_id}, (select member_id from video where video_id= #{video_id}), #{company_id})
	</insert>
	
	<!-- 기업이 낸 공고 조회하기 -->
	<select id="getCompany_Employments" parameterType="string" resultType="map">
	select * from employments where company_id = #{value} 
	</select>
	
	<!-- 기업이 낸 공고에 지원한 사람 목록 보기. -->
	<select id="getCompany_ApplyList" parameterType="string" resultType="map">
		SELECT A.apply_date as "apply_date", A.employment_id as "employment_id", A.member_id as "member_id", 
			   A.resume_id as "resume_id",
               E.employment_title as "employment_title", E.employment_time as "employment_time",
               M.member_name as "member_name",
               R.resume_title as "resume_title"
        FROM apply A
        JOIN member M
   	    ON A.member_id = M.member_id
            JOIN employments E
            ON A.employment_id = E.employment_id
                JOIN resume R
                ON A.resume_id = R.resume_id
                    WHERE E.company_id =#{companyid} and A.employment_id = #{listviewid}
                        ORDER BY E.employment_time  
	</select>
	
	<!-- <select id="getSelect" parameterType="MemberVO" resultType="MemberVO">
		SELECT * FROM MEMBER WHERE ID = #{ID}
	</select>
	
	<select id="memberLoginCheck" parameterType="MemberVO" resultType="MemberVO">
		SELECT * FROM MEMBER WHERE ID = #{ID} AND PW = #{PW}
	</select>
	
	<select id="memberSearch" parameterType="MemberVO" resultType="MemberVO">
		
	</select>
	
	<insert id="memberInsert" parameterType="MemberVO">
		INSERT INTO MEMBER VALUE(#{ID},#{NAME},#{PW},#{ADDR},#{TEL},#{GENDER},#{HOBBY},#{FILENAME},#{AUTH})
	</insert>
	
	<delete id="memberDelete" parameterType="MemberVO">
		DELETE FROM MEMBER WHERE ID = #{ID}
	</delete>
	
	<update id="memberUpdate" parameterType="MemberVO">
		UPDATE MEMBER SET NAME = #{NAME}, PW = #{PW} , ADDR = #{ADDR}, TEL = #{TEL}, GENDER = #{GENDER},
									HOBBY = #{HOBBY}, FILENAME = #{FILENAME}, AUTH = #{AUTH}
	</update> -->
</mapper>

